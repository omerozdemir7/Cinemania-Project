{"version":3,"file":"hero-BTaay8LO.js","sources":["../../src/components/hero/hero.js"],"sourcesContent":["import {\n  fetchDailyTrending,\n  fetchMovieDetails,\n  fetchMovieVideos,\n} from '../../services/api.js';\nimport { Modal } from '../modal/modal.js';\n\nconst IMAGE_BASE_URL = 'https://image.tmdb.org/t/p/original';\n\nasync function initHeroSection() {\n  const heroRoot = document.getElementById('hero');\n  if (!heroRoot) return;\n\n  try {\n    const data = await fetchDailyTrending();\n    const movies = Array.isArray(data?.data?.results)\n      ? data.data.results\n      : data?.results || [];\n\n    if (!movies.length) {\n      renderDefaultHero(heroRoot);\n      return;\n    }\n\n    const randomMovie = movies[Math.floor(Math.random() * movies.length)];\n    renderMovieHero(heroRoot, randomMovie);\n  } catch (err) {\n    console.error('Movie init error:', err);\n    renderDefaultHero(heroRoot);\n  }\n}\nfunction createRatingStars(vote) {\n  const fullStars = Math.floor(vote / 2);\n  const hasHalfStar = vote % 2 >= 1;\n  const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);\n  let stars = [];\n  for (let i = 0; i < fullStars; i++)\n    stars.push(\n      `<svg class=\"hero__icon--full-star\"><use xlink:href=\"${import.meta.env.BASE_URL}images/icon.svg#icon-full-star\"></use></svg>`\n    );\n  if (hasHalfStar)\n    stars.push(\n      `<svg class=\"hero__icon--half-star\"><use xlink:href=\"${import.meta.env.BASE_URL}images/icon.svg#icon-half-star\"></use></svg>`\n    );\n  for (let i = 0; i < emptyStars; i++)\n    stars.push(\n      `<svg class=\"hero__icon--empty-star\"><use xlink:href=\"${import.meta.env.BASE_URL}images/icon.svg#icon-empty-star\"></use></svg>`\n    );\n  return stars.join('');\n}\n\nfunction renderMovieHero(container, movie) {\n  const ratingStars = createRatingStars(movie.vote_average);\n  container.innerHTML = `\n    <div class=\"hero__bg\" style=\"background-image:url('${IMAGE_BASE_URL}${\n    movie.backdrop_path || movie.poster_path || ''\n  }')\"></div>\n    <div class=\"hero__scrim\"></div>\n\n    <div class=\"hero__inner\">\n    <div class=\"hero__badge\">\n      <h2 class=\"hero__title\">${movie.title ?? movie.name ?? 'Untitled'}</h2>\n      <span class=\"hero__rating\">${ratingStars}</span>\n      </div>\n      <p class=\"hero__subtitle\">\n        ${movie.overview || 'No description available.'}\n      </p>\n\n      <div class=\"hero__ctas\">\n        <button class=\"hero__btn--play\" id=\"play-trailer-btn\">Watch Trailer</button>\n        <button class=\"hero__btn--info\" id=\"more-info-btn\">More Info</button>\n      </div>\n    </div>\n  `;\n\n  // ID çakışması olmasın diye container scope'undan seç\n  const trailerBtn = container.querySelector('#play-trailer-btn');\n  const detailsBtn = container.querySelector('#more-info-btn');\n\n  trailerBtn?.addEventListener('click', () => playTrailer(movie.id));\n  detailsBtn?.addEventListener('click', () => showMovieDetails(movie.id));\n}\n\nfunction renderDefaultHero(container) {\n  container.innerHTML = `\n    <div class=\"hero__bg\" style=\"background-image:linear-gradient(90deg,#000,#111)\"></div>\n    <div class=\"hero__scrim\"></div>\n\n    <div class=\"hero__inner\">\n      <h2 class=\"hero__title\">Let's Make Your Own Cinema</h2>\n      <p class=\"hero__subtitle\">\n        A guide to creating a personalized movie experience.\n        Decorate your space, choose your films, and enjoy the show!\n      </p>\n\n      <div class=\"hero__ctas\">\n        <a href=\"../../pages/catalog/catalog.html\" class=\"hero__btn--play\">Get Started</a>\n      </div>\n    </div>\n  `;\n}\n\nasync function playTrailer(movieId) {\n  try {\n    const data = await fetchMovieVideos(movieId);\n    const results = Array.isArray(data?.data?.results)\n      ? data.data.results\n      : data?.results;\n    const trailer = results?.find(\n      v => v.type === 'Trailer' && v.site === 'YouTube'\n    );\n    if (trailer) {\n      Modal.showTrailer(trailer.key); // <-- basicLightbox\n    } else {\n      Modal.showMessage('Trailer not available.', 'Info');\n    }\n  } catch (err) {\n    console.error('Play trailer error:', err);\n    Modal.showMessage('Error fetching trailer.', 'Error');\n  }\n}\n\nasync function showMovieDetails(movieId) {\n  try {\n    const res = await fetchMovieDetails(movieId);\n    const movie = res?.data ?? res;\n    Modal.renderMovie(movie); // <-- tek çağrı, kendi kendine açar\n  } catch (err) {\n    console.error('Movie details error:', err);\n    Modal.showMessage('Movie details could not be loaded.', 'Error');\n  }\n}\n\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initHeroSection);\n} else {\n  initHeroSection();\n}\n"],"names":["IMAGE_BASE_URL","initHeroSection","heroRoot","data","fetchDailyTrending","movies","_a","renderDefaultHero","randomMovie","renderMovieHero","err","createRatingStars","vote","fullStars","hasHalfStar","emptyStars","stars","i","container","movie","ratingStars","trailerBtn","detailsBtn","playTrailer","showMovieDetails","movieId","fetchMovieVideos","results","trailer","v","Modal","res","fetchMovieDetails"],"mappings":"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"}