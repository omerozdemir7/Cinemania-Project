(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=o(r);fetch(r.href,i)}})();const U="modulepreload",G=function(e){return"/Cinemania-Project/"+e},_={},F=function(t,o,n){let r=Promise.resolve();if(o&&o.length>0){let l=function(u){return Promise.all(u.map(g=>Promise.resolve(g).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};var a=l;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");r=l(o.map(u=>{if(u=G(u),u in _)return;_[u]=!0;const g=u.endsWith(".css"),h=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const p=document.createElement("link");if(p.rel=g?"stylesheet":U,g||(p.as="script"),p.crossOrigin="",p.href=u,d&&p.setAttribute("nonce",d),document.head.appendChild(p),g)return new Promise((f,y)=>{p.addEventListener("load",f),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return r.then(c=>{for(const d of c||[])d.status==="rejected"&&i(d.reason);return t().catch(i)})},Y="362ee522f1af2dedac989b8df9cfb4eb",z="https://api.themoviedb.org/3",W="https://image.tmdb.org/t/p/w500",J="https://image.tmdb.org/t/p/original";async function M(e,t={}){const o=new URL(`${z}${e}`);o.searchParams.append("api_key",Y),o.searchParams.append("language","en-US");for(const n in t)t[n]&&o.searchParams.append(n,t[n]);try{const n=await fetch(o);if(!n.ok)throw new Error(`API Error: ${n.status}`);return await n.json()}catch(n){return console.error("API Request Failed:",n),null}}async function V(e=1){return await M("/movie/popular",{page:e})}async function q(e="week",t=1){return await M(`/trending/movie/${e}`,{page:t})}async function K(e=1){return await M("/movie/upcoming",{page:e,region:"US"})}async function Q(e,t=1,o=""){return await M("/search/movie",{query:e,page:t,primary_release_year:o})}async function A(e){return await M(`/movie/${e}`)}async function X(e){return await M(`/movie/${e}/videos`)}function P(e){return e?`${W}${e}`:"https://via.placeholder.com/500x750?text=No+Poster"}function j(e){return e?`${J}${e}`:"https://via.placeholder.com/1920x1080?text=No+Image"}function Z(){const e=document.querySelector("#movie-modal-backdrop");if(!e)return console.error("Modal backdrop '#movie-modal-backdrop' not found."),{openModal:()=>{},closeModal:()=>{}};const t=e.querySelector("#modal-close-btn"),o=e.querySelector("#modal-poster"),n=e.querySelector("#modal-title"),r=e.querySelector("#modal-vote-avg"),i=e.querySelector("#modal-vote-count"),a=e.querySelector("#modal-popularity"),c=e.querySelector("#modal-genre"),d=e.querySelector("#modal-description"),l=e.querySelector("#modal-add-btn");function u(){return JSON.parse(localStorage.getItem("myLibrary"))||[]}function g(f){localStorage.setItem("myLibrary",JSON.stringify(f))}async function h(f){const y=await A(f);if(y){if(o&&(o.src=P(y.poster_path)),n&&(n.textContent=y.title.toUpperCase()),r&&(r.textContent=y.vote_average.toFixed(1)),i&&(i.textContent=y.vote_count),a&&(a.textContent=y.popularity.toFixed(1)),c&&(c.textContent=y.genres.map(b=>b.name).join(", ")||"N/A"),d&&(d.textContent=y.overview||"No description available."),l){const b=u(),L=Number(y.id);l.textContent=b.includes(L)?"Remove from my library":"Add to my library",l.dataset.id=L}e.classList.remove("is-hidden"),document.body.classList.add("modal-open")}}function p(){e.classList.add("is-hidden"),document.body.classList.remove("modal-open")}return t&&t.addEventListener("click",p),e.addEventListener("click",f=>{f.target===e&&p()}),window.addEventListener("keydown",f=>{f.key==="Escape"&&!e.classList.contains("is-hidden")&&p()}),l&&l.addEventListener("click",()=>{const f=Number(l.dataset.id);if(!f)return;const y=u(),b=y.indexOf(f);b>-1?(y.splice(b,1),l.textContent="Add to my library"):(y.push(f),l.textContent="Remove from my library"),g(y)}),{openModal:h,closeModal:p}}function ee(){const e=document.querySelector(".footer-link"),t=document.getElementById("team-modal-backdrop"),o=document.getElementById("team-modal-close-btn");if(!e||!t)return;function n(a){a.preventDefault(),t.classList.remove("is-hidden"),document.body.classList.add("modal-open"),window.addEventListener("keydown",i)}function r(){t.classList.add("is-hidden"),document.body.classList.remove("modal-open"),window.removeEventListener("keydown",i)}function i(a){a.code==="Escape"&&r()}e.addEventListener("click",n),o&&o.addEventListener("click",r),t.addEventListener("click",a=>{a.target===t&&r()})}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".main-nav"),t=document.querySelector(".logo"),o=document.querySelector(".mobile-menu-btn");let n=null;if(!e||!t)return;const r=()=>window.innerWidth<=768;function i(d){r()&&(d&&d.preventDefault(),n||(n=document.createElement("div"),n.className="mobile-overlay",n.addEventListener("click",a),document.body.appendChild(n)),e.classList.add("is-open"),document.body.classList.add("menu-open"))}function a(){e.classList.remove("is-open"),document.body.classList.remove("menu-open"),n&&(n.removeEventListener("click",a),n.remove(),n=null)}let c=e.querySelector(".mobile-nav-close");c||(c=document.createElement("button"),c.type="button",c.className="mobile-nav-close",c.innerHTML="&times;",e.appendChild(c)),c.addEventListener("click",a),t.addEventListener("click",i),o&&o.addEventListener("click",i),e.querySelectorAll("a.nav-link").forEach(d=>{d.addEventListener("click",a)}),window.addEventListener("resize",()=>{r()||a()})});document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme-toggle-checkbox"),t=document.body;if(!e)return;localStorage.getItem("theme")==="light"&&(t.classList.add("light-mode"),e.checked=!0),e.addEventListener("change",()=>{e.checked?(t.classList.add("light-mode"),localStorage.setItem("theme","light")):(t.classList.remove("light-mode"),localStorage.setItem("theme","dark"))})});function C(){if(document.getElementById("loader"))return;const e=document.createElement("div");e.id="loader",e.style.cssText=`
    position: fixed; inset: 0; background: rgba(0,0,0,0.7);
    display: flex; justify-content: center; align-items: center;
    z-index: 99999; color: white; font-size: 18px; flex-direction: column;
    backdrop-filter: blur(3px);
  `,e.innerHTML=`
    <div class="spinner" style="
      border: 6px solid #333; border-top: 6px solid var(--primary-orange, orange);
      border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; margin-bottom: 10px;
    "></div><p>Loading...</p>
    <style>@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}</style>
  `,document.body.appendChild(e)}function T(){document.getElementById("loader")?.remove()}function te(e){const t=document.getElementById("trailer-modal-backdrop");if(!t)return;const o=document.getElementById("trailer-iframe"),n=document.getElementById("trailer-modal-close-btn");o&&(o.src=`https://www.youtube.com/embed/${e}?autoplay=1&rel=0&showinfo=0`),t.classList.remove("is-hidden"),document.body.classList.add("modal-open"),n&&(n.onclick=()=>S()),t.onclick=i=>{i.target===t&&S()};const r=i=>{i.key==="Escape"&&(S(),window.removeEventListener("keydown",r))};window.addEventListener("keydown",r)}function S(){const e=document.getElementById("trailer-modal-backdrop"),t=document.getElementById("trailer-iframe");e&&(e.classList.add("is-hidden"),document.body.classList.remove("modal-open"),t&&(t.src=""))}function O(){const e=document.getElementById("trailer-error-backdrop");if(!e)return;const t=document.getElementById("trailer-error-close-btn");e.classList.remove("is-hidden"),document.body.classList.add("modal-open");const o=()=>{e.classList.add("is-hidden"),document.body.classList.remove("modal-open"),window.removeEventListener("keydown",n)};t&&(t.onclick=o),e.onclick=r=>{r.target===e&&o()};const n=r=>{r.key==="Escape"&&o()};window.addEventListener("keydown",n)}function D(e){if(!e)return"N/A";if(Array.isArray(e)&&e.length>0&&typeof e[0]=="object")return e.map(o=>o.name).slice(0,2).join(", ");const t={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Sci-Fi",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};return Array.isArray(e)?e.map(n=>t[n]).filter(Boolean).slice(0,2).join(", ")||"Other":"N/A"}function R(e){const t=Math.round((e||0)/2);let o="";for(let n=1;n<=5;n++)o+=`<i class="fa-star ${n<=t?"fas active":"far"}"></i>`;return o}function N(e){const t=e.genres||e.genre_ids,o=e.release_date?new Date(e.release_date).getFullYear():"N/A";return`
    <div class="movie-card" data-id="${e.id}">
        <img src="${P(e.poster_path)}" alt="${e.title}" class="movie-card-poster" loading="lazy">
        <div class="movie-card-overlay">
            <h3 class="movie-title">${e.title}</h3>
            <div class="movie-meta">
                <span class="movie-genre">${D(t)} | ${o}</span>
                <div class="movie-rating">${R(e.vote_average)}</div>
            </div>
        </div>
    </div>
  `}async function w(e,t,o){if(!(!t||!o))try{const n=await A(e);if(!n)return;const r=j(n.backdrop_path||n.poster_path);t.style.backgroundImage=`
      linear-gradient(to right, 
        #111 0%, 
        rgba(17, 17, 17, 1) 30%, 
        rgba(17, 17, 17, 0.5) 50%, 
        transparent 100%),
      url('${r}')
    `,o.innerHTML=`
      <h1 class="hero-title">${n.title}</h1>
      <div class="star-rating hero-stars">
        ${R(n.vote_average)}
      </div>
      <p class="hero-description">${n.overview||"No description available."}</p>
      <div class="hero-buttons">
        <button class="btn btn-primary" id="hero-watch-trailer" data-id="${n.id}">Watch Trailer</button>
        <button class="btn btn-secondary" id="hero-details-btn" data-id="${n.id}">More details</button>
      </div>
    `;const i=o.querySelector("#hero-watch-trailer");i&&(i.onclick=async c=>{c.preventDefault();const d=c.target.dataset.id;try{const u=(await X(d))?.results?.find(g=>g.type==="Trailer"&&g.site==="YouTube");u?te(u.key):O()}catch(l){console.error(l),O()}});const a=o.querySelector("#hero-details-btn");a&&(a.onclick=c=>{c.preventDefault();const d=c.target.dataset.id;window.openMovieModal&&window.openMovieModal(d)})}catch(n){console.error("Hero update error:",n)}}function ne(e,t){if(!e||!t)return;const o=new Date(e.release_date).toLocaleDateString("en-US"),n=e.vote_average?e.vote_average.toFixed(1):"N.A",r=e.vote_count||0,i=e.popularity?e.popularity.toFixed(1):"N.A",a=D(e.genre_ids),c=j(e.backdrop_path||e.poster_path),u=(JSON.parse(localStorage.getItem("myLibrary"))||[]).includes(Number(e.id))?"Remove from my library":"Add to my library";t.innerHTML=`
    <div class="upcoming-image">
      <img src="${c}" alt="${e.title}" loading="lazy" />
    </div>
    <div class="upcoming-info">
      <h3>${e.title}</h3>
      <div class="movie-details-list">
        <div class="detail-item">
          <span class="detail-key">Release date</span>
          <span class="detail-history">${o}</span>
        </div>
        <div class="detail-item">
          <span class="detail-key">Vote / Votes</span>
          <span class="detail-value">
            <span class="rating-badge">${n}</span> / ${r}
          </span>
        </div>
        <div class="detail-item">
          <span class="detail-key">Popularity</span>
          <span class="detail-value">${i}</span>
        </div>
        <div class="detail-item">
          <span class="detail-key">Genre</span>
          <span class="detail-value">${a}</span>
        </div>
      </div>
      <h4>ABOUT</h4>
      <p class="about-text">${e.overview||"No description available."}</p>
      <button class="btn btn-primary btn-add-library" id="upcoming-add-btn" data-id="${e.id}">
        ${u}
      </button>
    </div>
  `;const g=t.querySelector("#upcoming-add-btn");g&&(g.onclick=()=>{const h=JSON.parse(localStorage.getItem("myLibrary"))||[],p=Number(g.dataset.id),f=h.indexOf(p);f>-1?(h.splice(f,1),g.textContent="Add to my library"):(h.push(p),g.textContent="Remove from my library"),localStorage.setItem("myLibrary",JSON.stringify(h))})}const oe=async()=>{const e=document.getElementById("home-hero"),t=e?.querySelector(".hero-content"),o=document.getElementById("weekly-trends-grid"),n=document.getElementById("upcoming-container");if(!(!e&&!o)){C();try{const[r,i,a]=await Promise.all([q("day"),q("week"),K()]);let c=null;if(r?.results?.length){const d=Math.floor(Math.random()*Math.min(5,r.results.length));c=r.results[d]}else i?.results?.length&&(c=i.results[0]);if(c?await w(c.id,e,t):(e.style.backgroundImage="",t.innerHTML=`
        <h1 class="hero-title">Let's Make Your Own Cinema</h1>
        <p class="hero-description">
          Is a guide to creating a personalized movie theater experience.
          You'll need a projector, screen, and speakers. Decorate your
          space, choose your films, and stock up on snacks for the full experience.
        </p>
        <div class="hero-buttons">
           <a href="/catalog.html" class="btn btn-primary">Get Started</a>
        </div>
      `),i?.results?.length&&o&&(o.innerHTML=i.results.slice(0,3).map(d=>N(d)).join(""),o.addEventListener("click",d=>{const l=d.target.closest(".movie-card");l&&l.dataset.id&&(w(l.dataset.id,e,t),window.scrollTo({top:0,behavior:"smooth"}))})),a?.results?.length&&n){const d=Math.floor(Math.random()*Math.min(10,a.results.length)),l=a.results[d];ne(l,n)}}catch(r){console.error("Anasayfa yükleme hatası:",r),e&&t&&(e.style.backgroundImage="",t.innerHTML=`
        <h1 class="hero-title">Let's Make Your Own Cinema</h1>
        <p class="hero-description">
          Is a guide to creating a personalized movie theater experience.
          You'll need a projector, screen, and speakers. Decorate your
          space, choose your films, and stock up on snacks for the full experience.
        </p>
        <div class="hero-buttons">
           <a href="/catalog.html" class="btn btn-primary">Get Started</a>
        </div>
      `)}finally{T()}}};oe();function re(e,t,o,n){if(!e||t<=1){e&&(e.innerHTML="");return}e.innerHTML="";const r=5;let i=Math.max(o-2,1),a=Math.min(i+r-1,t);a-i<r-1&&(i=Math.max(a-r+1,1));const c=document.createElement("button");c.className="pagination-arrow",c.innerHTML="&laquo;",c.disabled=o===1,c.addEventListener("click",()=>n(o-1)),e.appendChild(c),i>1&&(e.appendChild(B(1,n)),i>2&&e.appendChild(H()));for(let l=i;l<=a;l++){const u=B(l,n,l===o);e.appendChild(u)}a<t&&(a<t-1&&e.appendChild(H()),e.appendChild(B(t,n)));const d=document.createElement("button");d.className="pagination-arrow",d.innerHTML="&raquo;",d.disabled=o===t,d.addEventListener("click",()=>n(o+1)),e.appendChild(d)}function B(e,t,o=!1){const n=document.createElement("button");return n.className="pagination-btn",o&&n.classList.add("active"),n.textContent=e,n.addEventListener("click",()=>t(e)),n}function H(){const e=document.createElement("span");return e.className="pagination-dots",e.textContent="...",e}const ie=async()=>{const e=document.getElementById("search-form"),t=document.getElementById("search-input"),o=document.getElementById("movie-grid"),n=document.querySelector(".pagination"),r=document.getElementById("catalog-hero"),i=document.getElementById("catalog-hero-content"),a=document.getElementById("year-dropdown"),c=document.getElementById("dropdown-header"),d=document.getElementById("dropdown-list"),l=document.getElementById("selected-year"),u=document.getElementById("year-input");if(!o)return;const g=new Date().getFullYear();if(d){const s=document.createElement("li");s.classList.add("dropdown-item"),s.textContent="Year",s.onclick=()=>{u&&(u.value=""),l&&(l.textContent="Year",l.style.color=""),p()},d.appendChild(s);for(let m=g;m>=1950;m--){const v=document.createElement("li");v.classList.add("dropdown-item"),v.textContent=m,v.onclick=()=>{u&&(u.value=m),l&&(l.textContent=m,l.style.color="var(--primary-orange)"),p()},d.appendChild(v)}}function h(){a&&a.classList.toggle("active"),d&&d.classList.toggle("is-hidden")}function p(){a&&a.classList.remove("active"),d&&d.classList.add("is-hidden")}c&&c.addEventListener("click",s=>{s.stopPropagation(),h()}),document.addEventListener("click",s=>{a&&!a.contains(s.target)&&p()});let f=1,y="",b="",L=1;async function x(){C();const s=await V(1);T(),s?.results?.length&&(k(s.results),s.results[0]&&await w(s.results[0].id,r,i))}e&&e.addEventListener("submit",async s=>{s.preventDefault();const m=t.value.trim(),v=u?u.value:"";m&&(f=1,y=m,b=v,p(),await I(m,v,f))});async function I(s,m,v){C();const E=await Q(s,v,m);if(T(),!E?.results?.length){o.innerHTML=`
        <div class="no-results-container">
          <h2 class="no-results-title">OOPS...</h2>
          <h3 class="no-results-text">We are very sorry!</h3>
          <h3 class="no-results-text">We don’t have any results matching your search.</h3>
        </div>
      `,n.innerHTML="",i.innerHTML="",r.style.backgroundImage="none";return}L=E.total_pages,k(E.results),E.results[0]&&await w(E.results[0].id,r,i),re(n,L,v,$=>{f=$,I(y,b,$),window.scrollTo({top:0,behavior:"smooth"})})}function k(s){o.innerHTML=s.map(m=>N(m)).join("")}o.addEventListener("click",s=>{const m=s.target.closest(".movie-card");m&&m.dataset.id&&(w(m.dataset.id,r,i),window.scrollTo({top:0,behavior:"smooth"}))}),await x()};ie();const se=async()=>{const e=document.getElementById("library-grid"),t=document.getElementById("library-hero"),o=document.getElementById("library-hero-content"),n=document.getElementById("genre-filter-container"),r=document.getElementById("genre-header"),i=document.getElementById("selected-genre-text"),a=document.getElementById("genre-list"),c=document.getElementById("load-more-container"),d=document.getElementById("load-more-btn");if(!e)return;const l=JSON.parse(localStorage.getItem("myLibrary")||"[]"),u=(Array.isArray(l)?l:[]).map(s=>Number(s)).filter(s=>Number.isFinite(s)&&s>0);if(!u.length){e.innerHTML=`
      <div class="library-message">
        <p style="font-size: 24px; font-weight: 500; margin-bottom: 10px;">OOPS...</p>
        <p>Henüz bir film eklemediniz!</p>
        <a href="/catalog.html" class="btn btn-primary" style="margin-top:20px; display:inline-block;">Kataloğa Git</a>
      </div>`,n&&(n.style.display="none"),c&&c.classList.add("is-hidden");return}const g=await Promise.allSettled(u.map(s=>A(s))),h=[],p=[];g.forEach((s,m)=>{const v=u[m];s.status==="fulfilled"&&s.value&&(h.push(s.value),p.push(v))}),localStorage.setItem("myLibrary",JSON.stringify(p)),h.length>0&&await w(h[0].id,t,o);const f=new Map;if(h.forEach(s=>{s.genres&&s.genres.forEach(m=>f.set(m.id,m.name))}),a){const s=document.createElement("div");s.className="genre-item active",s.textContent="All Genres",s.dataset.id="all",a.appendChild(s),f.forEach((m,v)=>{const E=document.createElement("div");E.className="genre-item",E.textContent=m,E.dataset.id=v,a.appendChild(E)})}r&&r.addEventListener("click",s=>{s.stopPropagation(),a.classList.toggle("is-hidden"),n.classList.toggle("is-open")}),document.addEventListener("click",s=>{n&&!n.contains(s.target)&&(a.classList.add("is-hidden"),n.classList.remove("is-open"))});let y="all",b=[...h];a&&a.addEventListener("click",s=>{if(s.target.classList.contains("genre-item")){y=s.target.dataset.id;const m=s.target.textContent;i&&(i.textContent=m==="All Genres"?"Genre":m),document.querySelectorAll(".genre-item").forEach(v=>v.classList.remove("active")),s.target.classList.add("active"),a.classList.add("is-hidden"),n.classList.remove("is-open"),I()}});let L=0;const x=6;function I(){y==="all"?b=[...h]:b=h.filter(s=>s.genres.some(m=>m.id.toString()===y.toString())),L=0,e.innerHTML="",b.length===0?(e.innerHTML='<div class="library-message">Bu türde film bulunamadı.</div>',c&&c.classList.add("is-hidden")):k()}function k(){const s=b.slice(L,L+x),m=s.map(v=>N(v)).join("");e.insertAdjacentHTML("beforeend",m),L+=s.length,L>=b.length?c&&c.classList.add("is-hidden"):c&&c.classList.remove("is-hidden")}d&&d.addEventListener("click",k),k(),e.addEventListener("click",s=>{const m=s.target.closest(".movie-card");m&&m.dataset.id&&(w(m.dataset.id,t,o),window.scrollTo({top:0,behavior:"smooth"}))})};se();document.addEventListener("DOMContentLoaded",()=>{const{openModal:e}=Z();window.openMovieModal=e,ee();const t=window.location.pathname;let o=null;t.includes("catalog.html")?o="catalog.js":t.includes("my-library.html")?o="my-library.js":(t==="/"||t.endsWith("index.html")||t.endsWith("/Cinemania-Project/"))&&(o="index.js"),document.querySelectorAll(".nav-link").forEach(r=>{r.classList.remove("active");const i=r.getAttribute("href");((t==="/"||t.includes("index.html"))&&i.includes("index.html")||t.includes("catalog")&&i.includes("catalog")||t.includes("library")&&i.includes("library"))&&r.classList.add("active")}),o&&F(()=>import(`../pages/${o}`),[]).then(()=>console.log(`${o} yüklendi.`)).catch(r=>console.error(`${o} yüklenirken hata:`,r))});
//# sourceMappingURL=main-6orzyBuR.js.map
