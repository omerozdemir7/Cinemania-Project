(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(n){if(n.ep)return;n.ep=!0;const c=r(n);fetch(n.href,c)}})();const g="362ee522f1af2dedac989b8df9cfb4eb",L="https://api.themoviedb.org/3",b="https://image.tmdb.org/t/p/w500";async function E(e,o={}){const r=new URL(`${L}${e}`);r.searchParams.append("api_key",g),r.searchParams.append("language","en-US");for(const t in o)o[t]&&r.searchParams.append(t,o[t]);try{const t=await fetch(r,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors"});if(!t.ok)throw new Error(`API Error: ${t.status}`);return await t.json()}catch(t){return console.error("API Request Failed:",t),t.message.includes("CORS")||t.message.includes("NetworkError")?(console.warn("CORS issue detected, trying proxy..."),await w(r.toString())):null}}async function w(e){const o="https://cors-anywhere.herokuapp.com/";try{const r=await fetch(o+e);if(!r.ok)throw new Error(`Proxy API Error: ${r.status}`);return await r.json()}catch(r){return console.error("Proxy Request Failed:",r),null}}async function S(e){return await E(`/movie/${e}`)}function k(e){return e?`${b}${e}`:"https://via.placeholder.com/500x750?text=No+Poster"}function x(){const e=document.querySelector("#movie-modal-backdrop");if(!e)return console.error("Modal backdrop '#movie-modal-backdrop' not found."),{openModal:()=>{},closeModal:()=>{}};const o=e.querySelector("#modal-close-btn"),r=e.querySelector("#modal-poster"),t=e.querySelector("#modal-title"),n=e.querySelector("#modal-vote-avg"),c=e.querySelector("#modal-vote-count"),i=e.querySelector("#modal-popularity"),s=e.querySelector("#modal-genre"),a=e.querySelector("#modal-description"),l=e.querySelector("#modal-add-btn");function y(){return JSON.parse(localStorage.getItem("myLibrary"))||[]}function v(u){localStorage.setItem("myLibrary",JSON.stringify(u))}async function h(u){const d=await S(u);if(d){if(r&&(r.src=k(d.poster_path)),t&&(t.textContent=d.title.toUpperCase()),n&&(n.textContent=d.vote_average.toFixed(1)),c&&(c.textContent=d.vote_count),i&&(i.textContent=d.popularity.toFixed(1)),s&&(s.textContent=d.genres.map(m=>m.name).join(", ")||"N/A"),a&&(a.textContent=d.overview||"No description available."),l){const m=y(),p=Number(d.id);l.textContent=m.includes(p)?"Remove from my library":"Add to my library",l.dataset.id=p}e.classList.remove("is-hidden"),document.body.classList.add("modal-open")}}function f(){e.classList.add("is-hidden"),document.body.classList.remove("modal-open")}return o&&o.addEventListener("click",f),e.addEventListener("click",u=>{u.target===e&&f()}),window.addEventListener("keydown",u=>{u.key==="Escape"&&!e.classList.contains("is-hidden")&&f()}),l&&l.addEventListener("click",()=>{const u=Number(l.dataset.id);if(!u)return;const d=y(),m=d.indexOf(u);m>-1?(d.splice(m,1),l.textContent="Add to my library"):(d.push(u),l.textContent="Remove from my library"),v(d)}),{openModal:h,closeModal:f}}function C(){const e=document.querySelector(".footer-link"),o=document.getElementById("team-modal-backdrop"),r=document.getElementById("team-modal-close-btn");if(!e||!o)return;function t(i){i.preventDefault(),o.classList.remove("is-hidden"),document.body.classList.add("modal-open"),window.addEventListener("keydown",c)}function n(){o.classList.add("is-hidden"),document.body.classList.remove("modal-open"),window.removeEventListener("keydown",c)}function c(i){i.code==="Escape"&&n()}e.addEventListener("click",t),r&&r.addEventListener("click",n),o.addEventListener("click",i=>{i.target===o&&n()})}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".main-nav"),o=document.querySelector(".logo"),r=document.querySelector(".mobile-menu-btn");let t=null;if(!e||!o)return;const n=()=>window.innerWidth<=768;function c(a){n()&&(a&&a.preventDefault(),t||(t=document.createElement("div"),t.className="mobile-overlay",t.addEventListener("click",i),document.body.appendChild(t)),e.classList.add("is-open"),document.body.classList.add("menu-open"))}function i(){e.classList.remove("is-open"),document.body.classList.remove("menu-open"),t&&(t.removeEventListener("click",i),t.remove(),t=null)}let s=e.querySelector(".mobile-nav-close");s||(s=document.createElement("button"),s.type="button",s.className="mobile-nav-close",s.innerHTML="&times;",e.appendChild(s)),s.addEventListener("click",i),o.addEventListener("click",c),r&&r.addEventListener("click",c),e.querySelectorAll("a.nav-link").forEach(a=>{a.addEventListener("click",i)}),window.addEventListener("resize",()=>{n()||i()})});document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme-toggle-checkbox"),o=document.body;if(!e)return;localStorage.getItem("theme")==="light"&&(o.classList.add("light-mode"),e.checked=!0),e.addEventListener("change",()=>{e.checked?(o.classList.add("light-mode"),localStorage.setItem("theme","light")):(o.classList.remove("light-mode"),localStorage.setItem("theme","dark"))})});document.addEventListener("DOMContentLoaded",()=>{const{openModal:e}=x();window.openMovieModal=e,C();const o=window.location.href,r=window.location.pathname,t=o.includes("catalog"),n=o.includes("my-library"),c=!t&&!n&&(o.endsWith("/")||o.includes("index.html")||r==="/"||r==="/Cinemania-Project/"||r==="/Cinemania-Project");let i=null,s=null;t?(i="catalog.js",s="../pages/catalog/catalog.js"):n?(i="my-library.js",s="../pages/my-library/my-library.js"):c&&(i="index.js",s="../pages/home/index.js"),document.querySelectorAll(".nav-link").forEach(a=>{a.classList.remove("active");const l=a.getAttribute("href")||"";(c&&l.includes("index")||t&&l.includes("catalog")||n&&l.includes("library"))&&a.classList.add("active")}),s&&import(s).then(()=>console.log(`${i} yüklendi.`)).catch(a=>console.error(`${i} yüklenirken hata:`,a))});
//# sourceMappingURL=main-Czg1Fc1C.js.map
