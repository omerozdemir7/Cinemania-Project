{"version":3,"file":"main-zL7dp_19.js","sources":["../../src/js/data/movies-data.js","../../src/js/components/modal.js","../../src/js/components/team-modal.js","../../src/js/header/mobile-nav.js","../../src/js/common/theme-toggle.js","../../src/js/common/loader.js","../../src/js/components/trailer-modal.js","../../src/js/common/ui-helpers.js","../../src/js/pages/index.js","../../src/js/components/pagination.js","../../src/js/pages/catalog.js","../../src/js/pages/my-library.js","../../src/js/common/main.js"],"sourcesContent":["// src/js/movies-data.js\r\n\r\nconst API_KEY = '362ee522f1af2dedac989b8df9cfb4eb';\r\nconst BASE_URL = 'https://api.themoviedb.org/3';\r\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500'; // Kartlar için\r\nconst IMG_ORIGINAL_URL = 'https://image.tmdb.org/t/p/original'; // Hero için\r\n\r\n/* === GENEL FETCH FONKSİYONU === */\r\nasync function fetchFromAPI(endpoint, params = {}) {\r\n  const url = new URL(`${BASE_URL}${endpoint}`);\r\n  url.searchParams.append('api_key', API_KEY);\r\n  url.searchParams.append('language', 'en-US'); // İstersen 'tr-TR' yapabilirsin\r\n\r\n  for (const key in params) {\r\n    if (params[key]) url.searchParams.append(key, params[key]);\r\n  }\r\n\r\n  try {\r\n    const res = await fetch(url);\r\n    if (!res.ok) throw new Error(`API Error: ${res.status}`);\r\n    return await res.json();\r\n  } catch (err) {\r\n    console.error('API Request Failed:', err);\r\n    return null;\r\n  }\r\n}\r\n\r\n/* === DIŞA AÇILAN FONKSİYONLAR === */\r\n\r\nexport async function fetchPopularMovies(page = 1) {\r\n  return await fetchFromAPI('/movie/popular', { page });\r\n}\r\n\r\nexport async function fetchTrendingMovies(period = 'week', page = 1) {\r\n  return await fetchFromAPI(`/trending/movie/${period}`, { page });\r\n}\r\n\r\nexport async function fetchUpcomingMovies(page = 1) {\r\n  return await fetchFromAPI('/movie/upcoming', { page, region: 'US' });\r\n}\r\n\r\nexport async function searchMovies(query, page = 1, year = '') {\r\n  return await fetchFromAPI('/search/movie', {\r\n    query,\r\n    page,\r\n    primary_release_year: year,\r\n  });\r\n}\r\n\r\nexport async function fetchMovieDetails(id) {\r\n  return await fetchFromAPI(`/movie/${id}`);\r\n}\r\n\r\nexport async function fetchMovieVideos(id) {\r\n  return await fetchFromAPI(`/movie/${id}/videos`);\r\n}\r\n\r\n/* === GÖRSEL YARDIMCILARI === */\r\nexport function getImageUrl(path) {\r\n  return path ? `${IMG_URL}${path}` : 'https://via.placeholder.com/500x750?text=No+Poster';\r\n}\r\n\r\nexport function getOriginalImageUrl(path) {\r\n  return path ? `${IMG_ORIGINAL_URL}${path}` : 'https://via.placeholder.com/1920x1080?text=No+Image';\r\n}","// Gerekli modülleri import et\r\nimport { fetchMovieDetails, getImageUrl } from '../data/movies-data.js';\r\n\r\n/**\r\n * Film detay modalının tüm işlevselliğini ayarlar.\r\n * @returns { {openModal: Function, closeModal: Function} }\r\n */\r\nexport function setupModal() {\r\n  // === 1. DOM ELEMENTLERİNİ SEÇ ===\r\n  const backdrop = document.querySelector('#movie-modal-backdrop');\r\n\r\n  // Modal bulunamazsa hata ver ve boş fonksiyonlar döndür\r\n  if (!backdrop) {\r\n    console.error(\"Modal backdrop '#movie-modal-backdrop' not found.\");\r\n    return { openModal: () => {}, closeModal: () => {} };\r\n  }\r\n\r\n  const closeBtn = backdrop.querySelector('#modal-close-btn');\r\n  const poster = backdrop.querySelector('#modal-poster');\r\n  const title = backdrop.querySelector('#modal-title');\r\n  const voteAvg = backdrop.querySelector('#modal-vote-avg');\r\n  const voteCount = backdrop.querySelector('#modal-vote-count');\r\n  const popularity = backdrop.querySelector('#modal-popularity');\r\n  const genre = backdrop.querySelector('#modal-genre');\r\n  const description = backdrop.querySelector('#modal-description');\r\n  const addBtn = backdrop.querySelector('#modal-add-btn');\r\n\r\n  // === 2. LOCALSTORAGE YARDIMCI FONKSİYONLARI ===\r\n  function getLibrary() {\r\n    return JSON.parse(localStorage.getItem('myLibrary')) || [];\r\n  }\r\n\r\n  function saveLibrary(list) {\r\n    localStorage.setItem('myLibrary', JSON.stringify(list));\r\n  }\r\n\r\n  // === 3. MODAL AÇMA FONKSİYONU ===\r\n  async function openModal(movieId) {\r\n    // API'den film detaylarını çek\r\n    const movie = await fetchMovieDetails(movieId);\r\n    if (!movie) return; // Film bulunamazsa açma\r\n\r\n    // Modal içini film bilgileriyle doldur\r\n    if (poster) poster.src = getImageUrl(movie.poster_path);\r\n    if (title) title.textContent = movie.title.toUpperCase();\r\n    if (voteAvg) voteAvg.textContent = movie.vote_average.toFixed(1);\r\n    if (voteCount) voteCount.textContent = movie.vote_count; // HTML'deki '/' ayracı sabit\r\n    if (popularity) popularity.textContent = movie.popularity.toFixed(1);\r\n    if (genre) {\r\n      genre.textContent = movie.genres.map((g) => g.name).join(', ') || 'N/A';\r\n    }\r\n    if (description)\r\n      description.textContent = movie.overview || 'No description available.';\r\n\r\n    // Kütüphane butonunu ayarla\r\n    if (addBtn) {\r\n      const library = getLibrary();\r\n      const numericMovieId = Number(movie.id); // ID'yi sayıya çevir\r\n\r\n      // Film kütüphanede mi?\r\n      addBtn.textContent = library.includes(numericMovieId)\r\n        ? 'Remove from my library' // Varsa\r\n        : 'Add to my library'; // Yoksa\r\n      addBtn.dataset.id = numericMovieId; // Butona film ID'sini ekle\r\n    }\r\n\r\n    // Modal'ı görünür yap\r\n    backdrop.classList.remove('is-hidden');\r\n    document.body.classList.add('modal-open'); // Arkaplan kaydırmayı durdur\r\n  }\r\n\r\n  // === 4. MODAL KAPATMA FONKSİYONU ===\r\n  function closeModal() {\r\n    backdrop.classList.add('is-hidden');\r\n    document.body.classList.remove('modal-open'); // Kaydırmayı tekrar aç\r\n  }\r\n\r\n  // === 5. OLAY DİNLEYİCİLERİ (EVENT LISTENERS) ===\r\n\r\n  // Kapatma (X) butonu\r\n  if (closeBtn) closeBtn.addEventListener('click', closeModal);\r\n\r\n  // Backdrop'a (dışarıya) tıklayınca kapat\r\n  backdrop.addEventListener('click', (e) => {\r\n    if (e.target === backdrop) {\r\n      closeModal();\r\n    }\r\n  });\r\n\r\n  // ESC tuşu ile kapat\r\n  window.addEventListener('keydown', (e) => {\r\n    if (e.key === 'Escape' && !backdrop.classList.contains('is-hidden')) {\r\n      closeModal();\r\n    }\r\n  });\r\n\r\n  // \"Add to my library\" butonu\r\n  if (addBtn) {\r\n    addBtn.addEventListener('click', () => {\r\n      const id = Number(addBtn.dataset.id);\r\n      if (!id) return;\r\n\r\n      const library = getLibrary();\r\n      const idx = library.indexOf(id); // Filmin kütüphanedeki index'i\r\n\r\n      if (idx > -1) {\r\n        // Film varsa: çıkar\r\n        library.splice(idx, 1);\r\n        addBtn.textContent = 'Add to my library';\r\n      } else {\r\n        // Film yoksa: ekle\r\n        library.push(id);\r\n        addBtn.textContent = 'Remove from my library';\r\n      }\r\n      saveLibrary(library); // Değişikliği kaydet\r\n\r\n      // Not: Kütüphaneye ekledikten sonra yönlendirme kodu kaldırıldı.\r\n      // Bu, kullanıcının modalı kapatmadan başka filmlere bakmasına olanak tanır.\r\n      // Yönlendirme istenirse buraya eklenebilir.\r\n    });\r\n  }\r\n\r\n  // Dışarıya açılan fonksiyonları döndür\r\n  return { openModal, closeModal };\r\n}","// src/js/team-modal.js\r\n\r\nexport function setupTeamModal() {\r\n  // Footer linkini seç (Birden fazla sayfada olabilir, sınıfına göre seçiyoruz)\r\n  const openBtn = document.querySelector('.footer-link'); \r\n  const backdrop = document.getElementById('team-modal-backdrop');\r\n  const closeBtn = document.getElementById('team-modal-close-btn');\r\n\r\n  // Eğer elementler sayfada yoksa (örn. başka bir sayfadaysak) dur.\r\n  if (!openBtn || !backdrop) return;\r\n\r\n  function openModal(e) {\r\n    e.preventDefault(); // Linkin yukarı atmasını engelle\r\n    backdrop.classList.remove('is-hidden'); // Modalı göster\r\n    document.body.classList.add('modal-open'); // Scrollu kilitle\r\n    window.addEventListener('keydown', onEscKeyPress);\r\n  }\r\n\r\n  function closeModal() {\r\n    backdrop.classList.add('is-hidden'); // Modalı gizle\r\n    document.body.classList.remove('modal-open'); // Scrollu aç\r\n    window.removeEventListener('keydown', onEscKeyPress);\r\n  }\r\n\r\n  function onEscKeyPress(e) {\r\n    if (e.code === 'Escape') {\r\n      closeModal();\r\n    }\r\n  }\r\n\r\n  // Olay Dinleyicileri\r\n  openBtn.addEventListener('click', openModal);\r\n  \r\n  if (closeBtn) closeBtn.addEventListener('click', closeModal);\r\n  \r\n  backdrop.addEventListener('click', (e) => {\r\n    if (e.target === backdrop) closeModal();\r\n  });\r\n}","// LOGO İLE AÇILAN MOBİL MENÜ – SADE VERSİYON\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  const nav = document.querySelector(\".main-nav\");\r\n  const logo = document.querySelector(\".logo\");\r\n  const openBtn = document.querySelector(\".mobile-menu-btn\"); // Bazı sayfalarda var\r\n  let overlay = null;\r\n\r\n  if (!nav || !logo) return;\r\n\r\n  const isMobile = () => window.innerWidth <= 768;\r\n\r\n  function openNav(e) {\r\n    if (!isMobile()) return; // Desktop'ta çalışmasın\r\n    if (e) e.preventDefault();\r\n\r\n    // Overlay yoksa oluştur\r\n    if (!overlay) {\r\n      overlay = document.createElement(\"div\");\r\n      overlay.className = \"mobile-overlay\";\r\n      overlay.addEventListener(\"click\", closeNav);\r\n      document.body.appendChild(overlay);\r\n    }\r\n\r\n    nav.classList.add(\"is-open\");\r\n    document.body.classList.add(\"menu-open\");\r\n  }\r\n\r\n  function closeNav() {\r\n    nav.classList.remove(\"is-open\");\r\n    document.body.classList.remove(\"menu-open\");\r\n\r\n    if (overlay) {\r\n      overlay.removeEventListener(\"click\", closeNav);\r\n      overlay.remove();\r\n      overlay = null;\r\n    }\r\n  }\r\n\r\n  // Menü içi X butonu yoksa ekle\r\n  let closeBtn = nav.querySelector(\".mobile-nav-close\");\r\n  if (!closeBtn) {\r\n    closeBtn = document.createElement(\"button\");\r\n    closeBtn.type = \"button\";\r\n    \r\n    closeBtn.className = \"mobile-nav-close\";\r\n    closeBtn.innerHTML = \"&times;\";\r\n    nav.appendChild(closeBtn);\r\n  }\r\n  closeBtn.addEventListener(\"click\", closeNav);\r\n\r\n  // LOGO'ya tıklayınca menü aç\r\n  logo.addEventListener(\"click\", openNav);\r\n\r\n  // (Bazı sayfalarda varsa) hamburger butonu da açsın\r\n  if (openBtn) {\r\n    openBtn.addEventListener(\"click\", openNav);\r\n  }\r\n\r\n  // Menüdeki linklere tıklayınca menü kapansın\r\n  nav.querySelectorAll(\"a.nav-link\").forEach(link => {\r\n    link.addEventListener(\"click\", closeNav);\r\n  });\r\n\r\n  // Ekran genişlerse (desktop'a geçince) menüyü kapat\r\n  window.addEventListener(\"resize\", () => {\r\n    if (!isMobile()) {\r\n      closeNav();\r\n    }\r\n  });\r\n});\r\n","// Tema (Açık/Koyu Mod) Değiştirici\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const themeToggle = document.getElementById('theme-toggle-checkbox');\r\n  const body = document.body;\r\n\r\n  if (!themeToggle) return; // Toggle butonu yoksa çalışma\r\n\r\n  // 1. Sayfa yüklendiğinde hafızadaki temayı kontrol et\r\n  const currentTheme = localStorage.getItem('theme');\r\n  if (currentTheme === 'light') {\r\n    body.classList.add('light-mode');\r\n    themeToggle.checked = true; // Toggle'ı 'açık' konuma getir\r\n  }\r\n  // (Varsayılan 'dark' olduğu için else gerekmez)\r\n\r\n  // 2. Toggle butonuna tıklandığında temayı değiştir\r\n  themeToggle.addEventListener('change', () => {\r\n    if (themeToggle.checked) {\r\n      // Açık Moda Geç\r\n      body.classList.add('light-mode');\r\n      localStorage.setItem('theme', 'light'); // Seçimi hafızaya kaydet\r\n    } else {\r\n      // Koyu Moda Geç\r\n      body.classList.remove('light-mode');\r\n      localStorage.setItem('theme', 'dark'); // Seçimi hafızaya kaydet\r\n    }\r\n  });\r\n});","export function showLoader() {\r\n  if (document.getElementById('loader')) return;\r\n  const loader = document.createElement('div');\r\n  loader.id = 'loader';\r\n  loader.style.cssText = `\r\n    position: fixed; inset: 0; background: rgba(0,0,0,0.7);\r\n    display: flex; justify-content: center; align-items: center;\r\n    z-index: 99999; color: white; font-size: 18px; flex-direction: column;\r\n    backdrop-filter: blur(3px);\r\n  `;\r\n  loader.innerHTML = `\r\n    <div class=\"spinner\" style=\"\r\n      border: 6px solid #333; border-top: 6px solid var(--primary-orange, orange);\r\n      border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; margin-bottom: 10px;\r\n    \"></div><p>Loading...</p>\r\n    <style>@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}</style>\r\n  `;\r\n  document.body.appendChild(loader);\r\n}\r\n\r\nexport function hideLoader() {\r\n  document.getElementById('loader')?.remove();\r\n}","// Gerekli modülleri import et\r\nimport { fetchMovieVideos } from '../data/movies-data.js';\r\n\r\n// === 1. TRAILER MODALINI AÇ (BAŞARILI) ===\r\n/**\r\n * YouTube videosunu modal içinde açar.\r\n * @param {string} videoKey - YouTube video ID'si (örn. \"dQw4w9WgXcQ\")\r\n */\r\nexport function openTrailerModal(videoKey) {\r\n  const backdrop = document.getElementById('trailer-modal-backdrop');\r\n  if (!backdrop) return;\r\n\r\n  const iframe = document.getElementById('trailer-iframe');\r\n  const closeBtn = document.getElementById('trailer-modal-close-btn');\r\n\r\n  // Iframe'e YouTube linkini (otomatik oynatmalı) bas\r\n  if (iframe) {\r\n    iframe.src = `https://www.youtube.com/embed/${videoKey}?autoplay=1&rel=0&showinfo=0`;\r\n  }\r\n\r\n  backdrop.classList.remove('is-hidden');\r\n  document.body.classList.add('modal-open'); // Arkaplan kaydırmayı durdur\r\n\r\n  // Kapatma olayları\r\n  if (closeBtn) closeBtn.onclick = () => closeTrailerModal();\r\n  backdrop.onclick = (e) => {\r\n    if (e.target === backdrop) closeTrailerModal();\r\n  };\r\n  const onEsc = (e) => {\r\n    if (e.key === 'Escape') {\r\n      closeTrailerModal(); // Fonksiyonu çağır\r\n      window.removeEventListener('keydown', onEsc); // Dinleyiciyi kaldır\r\n    }\r\n  };\r\n  window.addEventListener('keydown', onEsc);\r\n}\r\n\r\n// === 2. TRAILER MODALINI KAPAT ===\r\nexport function closeTrailerModal() {\r\n  const backdrop = document.getElementById('trailer-modal-backdrop');\r\n  const iframe = document.getElementById('trailer-iframe');\r\n  if (!backdrop) return;\r\n\r\n  backdrop.classList.add('is-hidden');\r\n  document.body.classList.remove('modal-open'); // Kaydırmayı aç\r\n  // Iframe'in src'sini temizle (video arka planda oynamasın)\r\n  if (iframe) iframe.src = '';\r\n}\r\n\r\n// === 3. \"WATCH TRAILER\" TIKLAMA YÖNETİCİSİ ===\r\n/**\r\n * Bir film ID'si alır, trailer'ı arar ve ilgili modalı açar.\r\n * (ui-helpers.js tarafından çağrılır)\r\n * @param {number|string} movieId - Film ID'si\r\n */\r\nexport async function onWatchTrailerClick(movieId) {\r\n  try {\r\n    const data = await fetchMovieVideos(movieId);\r\n    // Videoları ara: Tipi \"Trailer\" ve sitesi \"YouTube\" olanı bul\r\n    const trailer = data?.results?.find(\r\n      (v) => v.type === 'Trailer' && v.site === 'YouTube'\r\n    );\r\n\r\n    if (trailer && trailer.key) {\r\n      openTrailerModal(trailer.key); // Bulunduysa aç\r\n    } else {\r\n      openTrailerErrorModal(); // Bulunamadıysa hata modalını aç\r\n    }\r\n  } catch (error) {\r\n    console.error('Fragman aranırken hata:', error);\r\n    openTrailerErrorModal(); // API hatası olursa hata modalını aç\r\n  }\r\n}\r\n\r\n// === 4. TRAILER HATA MODALINI AÇ ===\r\nexport function openTrailerErrorModal() {\r\n  const backdrop = document.getElementById('trailer-error-backdrop');\r\n  if (!backdrop) return;\r\n\r\n  const closeBtn = document.getElementById('trailer-error-close-btn');\r\n  backdrop.classList.remove('is-hidden');\r\n  document.body.classList.add('modal-open');\r\n\r\n  // Kapatma fonksiyonu (bu modal için özel)\r\n  const closeErrorModal = () => {\r\n    backdrop.classList.add('is-hidden');\r\n    document.body.classList.remove('modal-open');\r\n    window.removeEventListener('keydown', onEsc);\r\n  };\r\n\r\n  // Kapatma olayları\r\n  if (closeBtn) closeBtn.onclick = closeErrorModal;\r\n  backdrop.onclick = (e) => {\r\n    if (e.target === backdrop) closeErrorModal();\r\n  };\r\n  const onEsc = (e) => {\r\n    if (e.key === 'Escape') closeErrorModal();\r\n  };\r\n  window.addEventListener('keydown', onEsc);\r\n}","// src/js/ui-helpers.js\r\n\r\nimport {\r\n  fetchMovieDetails,\r\n  fetchMovieVideos,\r\n  getImageUrl,\r\n  getOriginalImageUrl,\r\n} from \"../data/movies-data.js\";\r\nimport { openTrailerModal, openTrailerErrorModal } from \"../components/trailer-modal.js\";\r\n\r\n// NOT: setupModal ve setupTeamModal'ı burada çağırmıyoruz, \r\n// onları main.js hallediyor. Burası sadece yardımcı fonksiyonlar.\r\n\r\n/* --- Yardımcılar --- */\r\nexport function getGenresText(genreData) {\r\n  if (!genreData) return \"N/A\";\r\n  \r\n  // Detay sayfasından gelen veri (Obje dizisi)\r\n  if (Array.isArray(genreData) && genreData.length > 0 && typeof genreData[0] === \"object\") {\r\n    return genreData.map((g) => g.name).slice(0, 2).join(\", \");\r\n  }\r\n\r\n  // Listeden gelen veri (ID dizisi)\r\n  const genreMap = {\r\n    28: \"Action\", 12: \"Adventure\", 16: \"Animation\", 35: \"Comedy\",\r\n    80: \"Crime\", 99: \"Documentary\", 18: \"Drama\", 10751: \"Family\",\r\n    14: \"Fantasy\", 36: \"History\", 27: \"Horror\", 10402: \"Music\",\r\n    9648: \"Mystery\", 10749: \"Romance\", 878: \"Sci-Fi\", 10770: \"TV Movie\",\r\n    53: \"Thriller\", 10752: \"War\", 37: \"Western\"\r\n  };\r\n\r\n  if (Array.isArray(genreData)) {\r\n    const genres = genreData.map((id) => genreMap[id]).filter(Boolean);\r\n    return genres.slice(0, 2).join(\", \") || \"Other\";\r\n  }\r\n  return \"N/A\";\r\n}\r\n\r\nexport function renderStars(vote) {\r\n  const stars = Math.round((vote || 0) / 2);\r\n  let html = \"\";\r\n  for (let i = 1; i <= 5; i++) {\r\n    html += `<i class=\"fa-star ${i <= stars ? \"fas active\" : \"far\"}\"></i>`;\r\n  }\r\n  return html;\r\n}\r\n\r\n/* --- Kart Render --- */\r\nexport function renderMovieCard(movie) {\r\n  const genreList = movie.genres || movie.genre_ids;\r\n  const year = movie.release_date ? new Date(movie.release_date).getFullYear() : \"N/A\";\r\n\r\n  return `\r\n    <div class=\"movie-card\" data-id=\"${movie.id}\">\r\n        <img src=\"${getImageUrl(movie.poster_path)}\" alt=\"${movie.title}\" class=\"movie-card-poster\" loading=\"lazy\">\r\n        <div class=\"movie-card-overlay\">\r\n            <h3 class=\"movie-title\">${movie.title}</h3>\r\n            <div class=\"movie-meta\">\r\n                <span class=\"movie-genre\">${getGenresText(genreList)} | ${year}</span>\r\n                <div class=\"movie-rating\">${renderStars(movie.vote_average)}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  `;\r\n}\r\n\r\n/* --- Hero Güncelleme --- */\r\nexport async function updateHeroWithMovie(movieId, heroSection, heroContent) {\r\n  if (!heroSection || !heroContent) return;\r\n\r\n  try {\r\n    const movie = await fetchMovieDetails(movieId);\r\n    if (!movie) return;\r\n\r\n    const bg = getOriginalImageUrl(movie.backdrop_path || movie.poster_path);\r\n\r\n    heroSection.style.backgroundImage = `\r\n      linear-gradient(to right, \r\n        #111 0%, \r\n        rgba(17, 17, 17, 1) 30%, \r\n        rgba(17, 17, 17, 0.5) 50%, \r\n        transparent 100%),\r\n      url('${bg}')\r\n    `;\r\n\r\n    heroContent.innerHTML = `\r\n      <h1 class=\"hero-title\">${movie.title}</h1>\r\n      <div class=\"star-rating hero-stars\">\r\n        ${renderStars(movie.vote_average)}\r\n      </div>\r\n      <p class=\"hero-description\">${movie.overview || \"No description available.\"}</p>\r\n      <div class=\"hero-buttons\">\r\n        <button class=\"btn btn-primary\" id=\"hero-watch-trailer\" data-id=\"${movie.id}\">Watch Trailer</button>\r\n        <button class=\"btn btn-secondary\" id=\"hero-details-btn\" data-id=\"${movie.id}\">More details</button>\r\n      </div>\r\n    `;\r\n\r\n    // Event Listener'lar\r\n    const trailerBtn = heroContent.querySelector(\"#hero-watch-trailer\");\r\n    if (trailerBtn) {\r\n      trailerBtn.onclick = async (e) => {\r\n        e.preventDefault();\r\n        const id = e.target.dataset.id;\r\n        try {\r\n          const videos = await fetchMovieVideos(id);\r\n          const trailer = videos?.results?.find(v => v.type === \"Trailer\" && v.site === \"YouTube\");\r\n          if (trailer) openTrailerModal(trailer.key);\r\n          else openTrailerErrorModal();\r\n        } catch (err) {\r\n          console.error(err);\r\n          openTrailerErrorModal();\r\n        }\r\n      };\r\n    }\r\n\r\n    const detailBtn = heroContent.querySelector(\"#hero-details-btn\");\r\n    if (detailBtn) {\r\n      detailBtn.onclick = (e) => {\r\n        e.preventDefault();\r\n        const id = e.target.dataset.id;\r\n        // main.js içinde window'a atadığımız fonksiyonu kullan\r\n        if(window.openMovieModal) window.openMovieModal(id);\r\n      };\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error(\"Hero update error:\", error);\r\n  }\r\n}\r\n\r\n/* --- Upcoming Section Render --- */\r\nexport function renderUpcomingSection(movie, container) {\r\n  if (!movie || !container) return;\r\n\r\n  const releaseDate = new Date(movie.release_date).toLocaleDateString(\"en-US\");\r\n  const voteAvg = movie.vote_average ? movie.vote_average.toFixed(1) : \"N.A\";\r\n  const voteCount = movie.vote_count || 0;\r\n  const popularity = movie.popularity ? movie.popularity.toFixed(1) : \"N.A\";\r\n  const genres = getGenresText(movie.genre_ids);\r\n  const imageUrl = getOriginalImageUrl(movie.backdrop_path || movie.poster_path);\r\n  const library = JSON.parse(localStorage.getItem(\"myLibrary\")) || [];\r\n  const isAdded = library.includes(Number(movie.id));\r\n  const btnText = isAdded ? \"Remove from my library\" : \"Add to my library\";\r\n\r\n  container.innerHTML = `\r\n    <div class=\"upcoming-image\">\r\n      <img src=\"${imageUrl}\" alt=\"${movie.title}\" loading=\"lazy\" />\r\n    </div>\r\n    <div class=\"upcoming-info\">\r\n      <h3>${movie.title}</h3>\r\n      <div class=\"movie-details-list\">\r\n        <div class=\"detail-item\">\r\n          <span class=\"detail-key\">Release date</span>\r\n          <span class=\"detail-history\">${releaseDate}</span>\r\n        </div>\r\n        <div class=\"detail-item\">\r\n          <span class=\"detail-key\">Vote / Votes</span>\r\n          <span class=\"detail-value\">\r\n            <span class=\"rating-badge\">${voteAvg}</span> / ${voteCount}\r\n          </span>\r\n        </div>\r\n        <div class=\"detail-item\">\r\n          <span class=\"detail-key\">Popularity</span>\r\n          <span class=\"detail-value\">${popularity}</span>\r\n        </div>\r\n        <div class=\"detail-item\">\r\n          <span class=\"detail-key\">Genre</span>\r\n          <span class=\"detail-value\">${genres}</span>\r\n        </div>\r\n      </div>\r\n      <h4>ABOUT</h4>\r\n      <p class=\"about-text\">${movie.overview || \"No description available.\"}</p>\r\n      <button class=\"btn btn-primary btn-add-library\" id=\"upcoming-add-btn\" data-id=\"${movie.id}\">\r\n        ${btnText}\r\n      </button>\r\n    </div>\r\n  `;\r\n\r\n  const btn = container.querySelector(\"#upcoming-add-btn\");\r\n  if (btn) {\r\n    btn.onclick = () => {\r\n      const currentLib = JSON.parse(localStorage.getItem(\"myLibrary\")) || [];\r\n      const movieId = Number(btn.dataset.id);\r\n      const index = currentLib.indexOf(movieId);\r\n\r\n      if (index > -1) {\r\n        currentLib.splice(index, 1);\r\n        btn.textContent = \"Add to my library\";\r\n      } else {\r\n        currentLib.push(movieId);\r\n        btn.textContent = \"Remove from my library\";\r\n      }\r\n      localStorage.setItem(\"myLibrary\", JSON.stringify(currentLib));\r\n    };\r\n  }\r\n}","// src/js/index.js\r\nimport { showLoader, hideLoader } from '../common/loader.js';\r\nimport { fetchTrendingMovies, fetchUpcomingMovies } from '../data/movies-data.js';\r\nimport {\r\n  renderMovieCard,\r\n  updateHeroWithMovie,\r\n  renderUpcomingSection,\r\n} from '../common/ui-helpers.js';\r\n\r\n// DOM hazır olunca çalış\r\n// (main.js zaten DOMContentLoaded içinde çağırıyor ama \r\n// dinamik import olduğu için burası kendi başına çalışır)\r\nconst initHome = async () => {\r\n  const heroSection = document.getElementById('home-hero');\r\n  const heroContent = heroSection?.querySelector('.hero-content');\r\n  const trendsGrid = document.getElementById('weekly-trends-grid');\r\n  const upcomingContainer = document.getElementById('upcoming-container');\r\n\r\n  if (!heroSection && !trendsGrid) return; // Anasayfada değilsek dur\r\n\r\n  showLoader();\r\n\r\n  try {\r\n    const [dayTrends, weekTrends, upcomingData] = await Promise.all([\r\n      fetchTrendingMovies('day'),\r\n      fetchTrendingMovies('week'),\r\n      fetchUpcomingMovies()\r\n    ]);\r\n\r\n    // --- Hero İşlemleri ---\r\n    let heroMovie = null;\r\n    if (dayTrends?.results?.length) {\r\n      const rand = Math.floor(Math.random() * Math.min(5, dayTrends.results.length));\r\n      heroMovie = dayTrends.results[rand];\r\n    } else if (weekTrends?.results?.length) {\r\n      heroMovie = weekTrends.results[0];\r\n    }\r\n\r\n    if (heroMovie) {\r\n      await updateHeroWithMovie(heroMovie.id, heroSection, heroContent);\r\n    } else {\r\n      // Eğer film bulunamazsa varsayılan hero içeriği\r\n      heroSection.style.backgroundImage = '';\r\n      heroContent.innerHTML = `\r\n        <h1 class=\"hero-title\">Let's Make Your Own Cinema</h1>\r\n        <p class=\"hero-description\">\r\n          Is a guide to creating a personalized movie theater experience.\r\n          You'll need a projector, screen, and speakers. Decorate your\r\n          space, choose your films, and stock up on snacks for the full experience.\r\n        </p>\r\n        <div class=\"hero-buttons\">\r\n           <a href=\"/catalog.html\" class=\"btn btn-primary\">Get Started</a>\r\n        </div>\r\n      `;\r\n    }\r\n\r\n    // --- Weekly Trends ---\r\n    if (weekTrends?.results?.length && trendsGrid) {\r\n      trendsGrid.innerHTML = weekTrends.results\r\n        .slice(0, 3)\r\n        .map(m => renderMovieCard(m))\r\n        .join('');\r\n        \r\n      trendsGrid.addEventListener('click', (e) => {\r\n        const card = e.target.closest('.movie-card');\r\n        if (card && card.dataset.id) {\r\n          // Kart tıklandığında hero'yu güncelle\r\n          updateHeroWithMovie(card.dataset.id, heroSection, heroContent);\r\n          window.scrollTo({ top: 0, behavior: 'smooth' });\r\n        }\r\n      });\r\n    }\r\n\r\n    // --- Upcoming ---\r\n    if (upcomingData?.results?.length && upcomingContainer) {\r\n      const rand = Math.floor(Math.random() * Math.min(10, upcomingData.results.length));\r\n      const movie = upcomingData.results[rand];\r\n      renderUpcomingSection(movie, upcomingContainer);\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error(\"Anasayfa yükleme hatası:\", error);\r\n    // API hatası durumunda varsayılan hero içeriği\r\n    if (heroSection && heroContent) {\r\n      heroSection.style.backgroundImage = '';\r\n      heroContent.innerHTML = `\r\n        <h1 class=\"hero-title\">Let's Make Your Own Cinema</h1>\r\n        <p class=\"hero-description\">\r\n          Is a guide to creating a personalized movie theater experience.\r\n          You'll need a projector, screen, and speakers. Decorate your\r\n          space, choose your films, and stock up on snacks for the full experience.\r\n        </p>\r\n        <div class=\"hero-buttons\">\r\n           <a href=\"/catalog.html\" class=\"btn btn-primary\">Get Started</a>\r\n        </div>\r\n      `;\r\n    }\r\n  } finally {\r\n    hideLoader();\r\n  }\r\n};\r\n\r\ninitHome();","/**\r\n * Sayfalama (pagination) component'ini oluşturur ve DOM'a basar.\r\n * @param {HTMLElement} container - Butonların basılacağı div\r\n * @param {number} totalPages - Toplam sayfa sayısı\r\n * @param {number} currentPage - Aktif sayfa\r\n * @param {Function} onPageChange - Sayfa değiştiğinde çağrılacak fonksiyon (yeni sayfa numarasını alır)\r\n */\r\nexport function setupPagination(\r\n  container,\r\n  totalPages,\r\n  currentPage,\r\n  onPageChange\r\n) {\r\n  if (!container || totalPages <= 1) {\r\n    if (container) container.innerHTML = ''; // Sayfalama gerekmiyorsa temizle\r\n    return;\r\n  }\r\n\r\n  container.innerHTML = '';\r\n  const maxButtons = 5; // Ekranda görünecek maks sayfa butonu\r\n\r\n  // Hangi sayfa numarasından başlayacağını hesapla\r\n  let start = Math.max(currentPage - 2, 1);\r\n  let end = Math.min(start + maxButtons - 1, totalPages);\r\n\r\n  // Eğer sona yaklaşıldıysa (örn. 50 sayfa varken 49. sayfadaysan),\r\n  // 46, 47, 48, 49, 50 göstermek için başlangıcı ayarla\r\n  if (end - start < maxButtons - 1) {\r\n    start = Math.max(end - maxButtons + 1, 1);\r\n  }\r\n\r\n  // --- 1. Sol Ok (Geri) ---\r\n  const prev = document.createElement('button');\r\n  prev.className = 'pagination-arrow';\r\n  prev.innerHTML = '&laquo;'; // «\r\n  prev.disabled = currentPage === 1; // İlk sayfadaysa pasif\r\n  prev.addEventListener('click', () => onPageChange(currentPage - 1));\r\n  container.appendChild(prev);\r\n\r\n  // --- 2. Sayfa Numaraları ---\r\n\r\n  // Gerekirse '1 ...' ekle\r\n  if (start > 1) {\r\n    container.appendChild(createPageButton(1, onPageChange));\r\n    if (start > 2) {\r\n      container.appendChild(createDots());\r\n    }\r\n  }\r\n\r\n  // Ana sayfa butonları (örn. 10, 11, 12, 13, 14)\r\n  for (let i = start; i <= end; i++) {\r\n    const btn = createPageButton(i, onPageChange, i === currentPage);\r\n    container.appendChild(btn);\r\n  }\r\n\r\n  // Gerekirse '... 50' ekle\r\n  if (end < totalPages) {\r\n    if (end < totalPages - 1) {\r\n      container.appendChild(createDots());\r\n    }\r\n    container.appendChild(createPageButton(totalPages, onPageChange));\r\n  }\r\n\r\n  // --- 3. Sağ Ok (İleri) ---\r\n  const next = document.createElement('button');\r\n  next.className = 'pagination-arrow';\r\n  next.innerHTML = '&raquo;'; // »\r\n  next.disabled = currentPage === totalPages; // Son sayfadaysa pasif\r\n  next.addEventListener('click', () => onPageChange(currentPage + 1));\r\n  container.appendChild(next);\r\n}\r\n\r\n// --- Yardımcı Fonksiyonlar (pagination.js için) ---\r\n\r\n/**\r\n * Tıklanabilir bir sayfa butonu oluşturur\r\n * @private\r\n */\r\nfunction createPageButton(page, onClick, isActive = false) {\r\n  const btn = document.createElement('button');\r\n  btn.className = 'pagination-btn';\r\n  if (isActive) btn.classList.add('active');\r\n  btn.textContent = page;\r\n  btn.addEventListener('click', () => onClick(page));\r\n  return btn;\r\n}\r\n\r\n/**\r\n * '...' elementini oluşturur\r\n * @private\r\n */\r\nfunction createDots() {\r\n  const dots = document.createElement('span');\r\n  dots.className = 'pagination-dots';\r\n  dots.textContent = '...';\r\n  return dots;\r\n}","// src/js/catalog.js\r\nimport {\r\n  searchMovies,\r\n  fetchPopularMovies,\r\n} from '../data/movies-data.js';\r\nimport { setupPagination } from '../components/pagination.js';\r\nimport { showLoader, hideLoader } from '../common/loader.js';\r\nimport { renderMovieCard, updateHeroWithMovie } from '../common/ui-helpers.js';\r\n\r\nconst initCatalog = async () => {\r\n  const form = document.getElementById('search-form');\r\n  const input = document.getElementById('search-input');\r\n  const movieGrid = document.getElementById('movie-grid');\r\n  const paginationContainer = document.querySelector('.pagination');\r\n  const heroSection = document.getElementById('catalog-hero');\r\n  const heroContent = document.getElementById('catalog-hero-content');\r\n\r\n  // --- YENİ DROPDOWN ELEMENTLERİ ---\r\n  const dropdown = document.getElementById('year-dropdown');\r\n  const dropdownHeader = document.getElementById('dropdown-header');\r\n  const dropdownList = document.getElementById('dropdown-list');\r\n  const selectedYearSpan = document.getElementById('selected-year');\r\n  const yearInput = document.getElementById('year-input'); // Gizli input\r\n\r\n  if (!movieGrid) return; // Katalog sayfasında değilsek dur\r\n\r\n  // --- YILLARI LİSTEYE DOLDURMA ---\r\n  const currentYear = new Date().getFullYear();\r\n\r\n  if (dropdownList) {\r\n    // 1. En başa \"Year (All)\" seçeneği ekle (Sıfırlamak için)\r\n    const resetLi = document.createElement('li');\r\n    resetLi.classList.add('dropdown-item'); // CSS'teki sınıf\r\n    resetLi.textContent = \"Year\";\r\n    \r\n    resetLi.onclick = () => {\r\n      if (yearInput) yearInput.value = \"\"; // Değeri temizle\r\n      if (selectedYearSpan) {\r\n        selectedYearSpan.textContent = \"Year\";\r\n        selectedYearSpan.style.color = \"\"; // Rengi sıfırla\r\n      }\r\n      closeDropdown();\r\n    };\r\n    dropdownList.appendChild(resetLi);\r\n\r\n    // 2. Yılları döngü ile ekle\r\n    for (let y = currentYear; y >= 1950; y--) {\r\n      const li = document.createElement('li');\r\n      li.classList.add('dropdown-item'); // CSS'teki sınıf\r\n      li.textContent = y;\r\n      \r\n      // Yıla tıklanınca ne olacak?\r\n      li.onclick = () => {\r\n        if (yearInput) yearInput.value = y; // Gizli inputa yaz\r\n        if (selectedYearSpan) {\r\n          selectedYearSpan.textContent = y; // Ekranda göster\r\n          selectedYearSpan.style.color = \"var(--primary-orange)\"; // Seçili olduğunu belli et\r\n        }\r\n        closeDropdown();\r\n      };\r\n      \r\n      dropdownList.appendChild(li);\r\n    }\r\n  }\r\n\r\n  // --- DROPDOWN AÇMA / KAPAMA MANTIĞI ---\r\n  function toggleDropdown() {\r\n    if (dropdown) dropdown.classList.toggle('active'); // Ok işaretini döndürür\r\n    if (dropdownList) dropdownList.classList.toggle('is-hidden'); // Listeyi açar/kapatır\r\n  }\r\n\r\n  function closeDropdown() {\r\n    if (dropdown) dropdown.classList.remove('active');\r\n    if (dropdownList) dropdownList.classList.add('is-hidden');\r\n  }\r\n\r\n  // Header'a tıklayınca aç/kapa\r\n  if (dropdownHeader) {\r\n    dropdownHeader.addEventListener('click', (e) => {\r\n      e.stopPropagation(); // Tıklamanın sayfa geneline yayılmasını engelle\r\n      toggleDropdown();\r\n    });\r\n  }\r\n\r\n  // Sayfada boş yere tıklayınca kapat\r\n  document.addEventListener('click', (e) => {\r\n    if (dropdown && !dropdown.contains(e.target)) {\r\n      closeDropdown();\r\n    }\r\n  });\r\n\r\n  // --- DEĞİŞKENLER ---\r\n  let currentPage = 1;\r\n  let lastQuery = '';\r\n  let lastYear = '';\r\n  let totalPages = 1;\r\n\r\n  // --- BAŞLANGIÇ FİLMLERİ ---\r\n  async function loadInitialMovies() {\r\n    showLoader();\r\n    const data = await fetchPopularMovies(1);\r\n    hideLoader();\r\n\r\n    if (data?.results?.length) {\r\n      renderMovies(data.results);\r\n      if (data.results[0]) {\r\n        await updateHeroWithMovie(data.results[0].id, heroSection, heroContent);\r\n      }\r\n    }\r\n  }\r\n\r\n  // --- ARAMA İŞLEMİ ---\r\n  if (form) {\r\n    form.addEventListener('submit', async (e) => {\r\n      e.preventDefault();\r\n      const query = input.value.trim();\r\n      \r\n      // DİKKAT: Artık select yok, gizli input'tan değeri alıyoruz\r\n      const year = yearInput ? yearInput.value : ''; \r\n\r\n      if (!query) return;\r\n\r\n      currentPage = 1;\r\n      lastQuery = query;\r\n      lastYear = year;\r\n      \r\n      // Arama yaparken dropdown açıksa kapatalım\r\n      closeDropdown(); \r\n      \r\n      await fetchAndRenderMovies(query, year, currentPage);\r\n    });\r\n  }\r\n\r\n  async function fetchAndRenderMovies(query, year, page) {\r\n    showLoader();\r\n    const data = await searchMovies(query, page, year);\r\n    hideLoader();\r\n\r\n if (!data?.results?.length) {\r\n      // Görseldeki tasarıma uygun HTML yapısı\r\n      movieGrid.innerHTML = `\r\n        <div class=\"no-results-container\">\r\n          <h2 class=\"no-results-title\">OOPS...</h2>\r\n          <h3 class=\"no-results-text\">We are very sorry!</h3>\r\n          <h3 class=\"no-results-text\">We don’t have any results matching your search.</h3>\r\n        </div>\r\n      `;\r\n      paginationContainer.innerHTML = '';\r\n      heroContent.innerHTML = '';\r\n      heroSection.style.backgroundImage = 'none';\r\n      return;\r\n    }\r\n    totalPages = data.total_pages;\r\n    renderMovies(data.results);\r\n\r\n    if (data.results[0]) {\r\n      await updateHeroWithMovie(data.results[0].id, heroSection, heroContent);\r\n    }\r\n\r\n    setupPagination(paginationContainer, totalPages, page, (newPage) => {\r\n      currentPage = newPage;\r\n      fetchAndRenderMovies(lastQuery, lastYear, newPage);\r\n      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    });\r\n  }\r\n\r\n  function renderMovies(list) {\r\n    movieGrid.innerHTML = list.map((m) => renderMovieCard(m)).join('');\r\n  }\r\n\r\n  movieGrid.addEventListener('click', (e) => {\r\n    const card = e.target.closest('.movie-card');\r\n    if (card && card.dataset.id) {\r\n      updateHeroWithMovie(card.dataset.id, heroSection, heroContent);\r\n      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    }\r\n  });\r\n\r\n  await loadInitialMovies();\r\n};\r\n\r\ninitCatalog();","// src/js/my-library.js\r\nimport { fetchMovieDetails } from '../data/movies-data.js';\r\nimport { renderMovieCard, updateHeroWithMovie } from '../common/ui-helpers.js';\r\n\r\nconst initLibrary = async () => {\r\n  const grid = document.getElementById('library-grid');\r\n  const heroSection = document.getElementById('library-hero');\r\n  const heroContent = document.getElementById('library-hero-content');\r\n  const genreContainer = document.getElementById('genre-filter-container');\r\n  const genreHeader = document.getElementById('genre-header');\r\n  const genreTextSpan = document.getElementById('selected-genre-text');\r\n  const genreList = document.getElementById('genre-list');\r\n  const loadMoreContainer = document.getElementById('load-more-container');\r\n  const loadMoreBtn = document.getElementById('load-more-btn');\r\n\r\n  if (!grid) return;\r\n\r\n  const storedIds = JSON.parse(localStorage.getItem('myLibrary') || '[]');\r\n  const numericIds = (Array.isArray(storedIds) ? storedIds : [])\r\n    .map((v) => Number(v))\r\n    .filter((v) => Number.isFinite(v) && v > 0);\r\n\r\n  if (!numericIds.length) {\r\n    grid.innerHTML = `\r\n      <div class=\"library-message\">\r\n        <p style=\"font-size: 24px; font-weight: 500; margin-bottom: 10px;\">OOPS...</p>\r\n        <p>Henüz bir film eklemediniz!</p>\r\n        <a href=\"/catalog.html\" class=\"btn btn-primary\" style=\"margin-top:20px; display:inline-block;\">Kataloğa Git</a>\r\n      </div>`;\r\n    if (genreContainer) genreContainer.style.display = 'none';\r\n    if (loadMoreContainer) loadMoreContainer.classList.add('is-hidden');\r\n    return;\r\n  }\r\n\r\n  const results = await Promise.allSettled(\r\n    numericIds.map((id) => fetchMovieDetails(id))\r\n  );\r\n\r\n  const allMovies = [];\r\n  const successfulIds = [];\r\n\r\n  results.forEach((r, idx) => {\r\n    const id = numericIds[idx];\r\n    if (r.status === 'fulfilled' && r.value) {\r\n      allMovies.push(r.value);\r\n      successfulIds.push(id);\r\n    }\r\n  });\r\n\r\n  localStorage.setItem('myLibrary', JSON.stringify(successfulIds));\r\n\r\n  if (allMovies.length > 0) {\r\n    await updateHeroWithMovie(allMovies[0].id, heroSection, heroContent);\r\n  }\r\n\r\n  // Tür Filtreleme\r\n  const availableGenres = new Map();\r\n  allMovies.forEach((movie) => {\r\n    if (movie.genres) {\r\n      movie.genres.forEach((g) => availableGenres.set(g.id, g.name));\r\n    }\r\n  });\r\n\r\n  if (genreList) {\r\n    const allItem = document.createElement('div');\r\n    allItem.className = 'genre-item active';\r\n    allItem.textContent = 'All Genres';\r\n    allItem.dataset.id = 'all';\r\n    genreList.appendChild(allItem);\r\n\r\n    availableGenres.forEach((name, id) => {\r\n      const item = document.createElement('div');\r\n      item.className = 'genre-item';\r\n      item.textContent = name;\r\n      item.dataset.id = id;\r\n      genreList.appendChild(item);\r\n    });\r\n  }\r\n\r\n  if (genreHeader) {\r\n    genreHeader.addEventListener('click', (e) => {\r\n      e.stopPropagation();\r\n      genreList.classList.toggle('is-hidden');\r\n      genreContainer.classList.toggle('is-open');\r\n    });\r\n  }\r\n\r\n  document.addEventListener('click', (e) => {\r\n    if (genreContainer && !genreContainer.contains(e.target)) {\r\n      genreList.classList.add('is-hidden');\r\n      genreContainer.classList.remove('is-open');\r\n    }\r\n  });\r\n\r\n  let currentGenreId = 'all';\r\n  let filteredMovies = [...allMovies];\r\n\r\n  if (genreList) {\r\n    genreList.addEventListener('click', (e) => {\r\n      if (e.target.classList.contains('genre-item')) {\r\n        currentGenreId = e.target.dataset.id;\r\n        const genreName = e.target.textContent;\r\n        if (genreTextSpan) genreTextSpan.textContent = genreName === 'All Genres' ? 'Genre' : genreName;\r\n\r\n        document.querySelectorAll('.genre-item').forEach((item) => item.classList.remove('active'));\r\n        e.target.classList.add('active');\r\n        genreList.classList.add('is-hidden');\r\n        genreContainer.classList.remove('is-open');\r\n        applyFilter();\r\n      }\r\n    });\r\n  }\r\n\r\n  let renderedCount = 0;\r\n  const PER_PAGE = 6;\r\n\r\n  function applyFilter() {\r\n    if (currentGenreId === 'all') {\r\n      filteredMovies = [...allMovies];\r\n    } else {\r\n      filteredMovies = allMovies.filter((m) =>\r\n        m.genres.some((g) => g.id.toString() === currentGenreId.toString())\r\n      );\r\n    }\r\n\r\n    renderedCount = 0;\r\n    grid.innerHTML = '';\r\n\r\n    if (filteredMovies.length === 0) {\r\n      grid.innerHTML = `<div class=\"library-message\">Bu türde film bulunamadı.</div>`;\r\n      if (loadMoreContainer) loadMoreContainer.classList.add('is-hidden');\r\n    } else {\r\n      renderBatch();\r\n    }\r\n  }\r\n\r\n  function renderBatch() {\r\n    const nextBatch = filteredMovies.slice(renderedCount, renderedCount + PER_PAGE);\r\n    const html = nextBatch.map((m) => renderMovieCard(m)).join('');\r\n    grid.insertAdjacentHTML('beforeend', html);\r\n    renderedCount += nextBatch.length;\r\n\r\n    if (renderedCount >= filteredMovies.length) {\r\n      if (loadMoreContainer) loadMoreContainer.classList.add('is-hidden');\r\n    } else {\r\n      if (loadMoreContainer) loadMoreContainer.classList.remove('is-hidden');\r\n    }\r\n  }\r\n\r\n  if (loadMoreBtn) {\r\n    loadMoreBtn.addEventListener('click', renderBatch);\r\n  }\r\n\r\n  renderBatch();\r\n\r\n  grid.addEventListener('click', (e) => {\r\n    const card = e.target.closest('.movie-card');\r\n    if (card && card.dataset.id) {\r\n      updateHeroWithMovie(card.dataset.id, heroSection, heroContent);\r\n      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    }\r\n  });\r\n};\r\n\r\ninitLibrary();","// src/js/main.js\r\n\r\n// === 1. ORTAK MODÜLLERİ İÇERİ AL ===\r\nimport { setupModal } from '../components/modal.js'; // Bu yol doğru görünüyor\r\nimport { setupTeamModal } from '../components/team-modal.js'; // Bu yol doğru görünüyor\r\nimport '../header/mobile-nav.js'; // Düzeltildi: ./ -> ../header/\r\nimport './theme-toggle.js'; // Düzeltildi: ../common/ -> ./\r\n\r\n// Sayfa modüllerini statik olarak import et\r\nimport '../pages/index.js';\r\nimport '../pages/catalog.js';\r\nimport '../pages/my-library.js';\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  // --- A. Ortak Bileşenleri Başlat ---\r\n  const { openModal } = setupModal();\r\n  window.openMovieModal = openModal;\r\n  setupTeamModal();\r\n\r\n  // --- B. Sayfa Yönlendirme (Routing) ---\r\n  const path = window.location.pathname;\r\n  let moduleName = null;\r\n\r\n  if (path.includes('catalog.html')) {\r\n    moduleName = 'catalog.js';\r\n  } else if (path.includes('my-library.html')) {\r\n    moduleName = 'my-library.js';\r\n  } else if (path === '/' || path.endsWith('index.html') || path.endsWith('/Cinemania-Project/')) {\r\n    moduleName = 'index.js';\r\n  }\r\n\r\n  // --- C. Navbar Aktif Link Ayarı (EKLENEN KISIM) ---\r\n  // Hangi sayfadaysak o linke 'active' sınıfını ekle\r\n  const navLinks = document.querySelectorAll('.nav-link');\r\n\r\n  navLinks.forEach(link => {\r\n    link.classList.remove('active'); // Önce hepsini temizle\r\n    const href = link.getAttribute('href');\r\n\r\n    // 1. Home Kontrolü (Ana sayfa veya index.html)\r\n    if ((path === '/' || path.includes('index.html')) && href.includes('index.html')) {\r\n      link.classList.add('active');\r\n    }\r\n    // 2. Catalog Kontrolü\r\n    else if (path.includes('catalog') && href.includes('catalog')) {\r\n      link.classList.add('active');\r\n    }\r\n    // 3. Library Kontrolü\r\n    else if (path.includes('library') && href.includes('library')) {\r\n      link.classList.add('active');\r\n    }\r\n  });\r\n\r\n  // --- D. Modüller zaten statik olarak import edildi ---\r\n});"],"names":["API_KEY","BASE_URL","IMG_URL","IMG_ORIGINAL_URL","fetchFromAPI","endpoint","params","url","key","res","err","fetchPopularMovies","page","fetchTrendingMovies","period","fetchUpcomingMovies","searchMovies","query","year","fetchMovieDetails","id","fetchMovieVideos","getImageUrl","path","getOriginalImageUrl","setupModal","backdrop","closeBtn","poster","title","voteAvg","voteCount","popularity","genre","description","addBtn","getLibrary","saveLibrary","list","openModal","movieId","movie","g","library","numericMovieId","closeModal","e","idx","setupTeamModal","openBtn","onEscKeyPress","nav","logo","overlay","isMobile","openNav","closeNav","link","themeToggle","body","showLoader","loader","hideLoader","openTrailerModal","videoKey","iframe","closeTrailerModal","onEsc","openTrailerErrorModal","closeErrorModal","getGenresText","genreData","genreMap","renderStars","vote","stars","html","i","renderMovieCard","genreList","updateHeroWithMovie","heroSection","heroContent","bg","trailerBtn","trailer","v","detailBtn","error","renderUpcomingSection","container","releaseDate","genres","imageUrl","btnText","btn","currentLib","index","initHome","trendsGrid","upcomingContainer","dayTrends","weekTrends","upcomingData","heroMovie","rand","m","card","setupPagination","totalPages","currentPage","onPageChange","maxButtons","start","end","prev","createPageButton","createDots","next","onClick","isActive","dots","initCatalog","form","input","movieGrid","paginationContainer","dropdown","dropdownHeader","dropdownList","selectedYearSpan","yearInput","currentYear","resetLi","closeDropdown","y","li","toggleDropdown","lastQuery","lastYear","loadInitialMovies","data","renderMovies","fetchAndRenderMovies","newPage","initLibrary","grid","genreContainer","genreHeader","genreTextSpan","loadMoreContainer","loadMoreBtn","storedIds","numericIds","results","allMovies","successfulIds","availableGenres","allItem","name","item","currentGenreId","filteredMovies","genreName","applyFilter","renderedCount","PER_PAGE","renderBatch","nextBatch","href"],"mappings":"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"}