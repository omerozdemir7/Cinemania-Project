{"version":3,"file":"upcoming-B3YStjOZ.js","sources":["../../src/components/upcoming/upcoming.js"],"sourcesContent":["import { fetchGenres, fetchMoviesBetween } from '../../services/api.js';\n\nconst upcomingContainer = document.getElementById('upcoming-content');\nif (!upcomingContainer) {\n} else {\n  const now = new Date();\nconst year = now.getFullYear();\nconst month = String(now.getMonth() + 1).padStart(2, '0');\nconst lastDay = new Date(year, now.getMonth() + 1, 0).getDate();\n\nconst startDate = `${year}-${month}-01`;\nconst endDate = `${year}-${month}-${lastDay}`;\n\n  let GENRES = [];\n\n  function getLibrary() {\n    return JSON.parse(localStorage.getItem('library')) || [];\n  }\n\n  function isInLibrary(id) {\n    return getLibrary().includes(id);\n  }\n\n  function toggleLibrary(movie, btn) {\n  let library = JSON.parse(localStorage.getItem('library')) || [];\n  const inLibrary = library.some(item => item.id === movie.id);\n\n  if (inLibrary) {\n    library = library.filter(item => item.id !== movie.id);\n    btn.textContent = 'Add to my library';\n    btn.classList.remove('upcoming__btn--remove');\n    btn.classList.add('upcoming__btn--add');\n  } else {\n    library.push(movie); \n    btn.textContent = 'Remove from my library';\n    btn.classList.remove('upcoming__btn--add');\n    btn.classList.add('upcoming__btn--remove');\n  }\n\n  localStorage.setItem('library', JSON.stringify(library));\n}\n\n  function getGenreNames(ids) {\n    return ids\n      .map(id => GENRES.find(g => g.id === id)?.name)\n      .filter(Boolean)\n      .join(', ');\n  }\n\n  function renderMovie(movie) {\n    const imageUrl = movie.backdrop_path\n      ? `https://image.tmdb.org/t/p/original/${movie.backdrop_path}`\n      : 'https://via.placeholder.com/500x300?text=No+Image';\n\n    const inLib    = isInLibrary(movie.id);\n    const btnText  = inLib ? 'Remove from my library' : 'Add to my library';\n    const btnClass = inLib ? 'upcoming__btn--remove' : 'upcoming__btn--add';\n\n    const genreNames = getGenreNames(movie.genre_ids || []);\n\n    upcomingContainer.innerHTML = `\n      <div class=\"upcoming__card\">\n        <img src=\"${imageUrl}\" alt=\"${movie.title}\" />\n        <div class=\"upcoming__info\">\n          <h3 class=\"upcoming__movie-name\">${movie.title}</h3>\n          <div class=\"upcoming__details-wrapper\">\n            <p class=\"upcoming__movie-detail\">\n              <span>Release date</span>\n              <span class=\"upcoming__highlight\">${movie.release_date || 'Unknown'}</span>\n            </p>\n\n            <p class=\"upcoming__movie-detail\">\n              <span>Vote / Votes</span>\n         \n              <span>\n                <span class=\"upcoming__vote-box\">${movie.vote_average?.toFixed(1) || '-'}</span>\n                <span>/</span>\n                <span class=\"upcoming__vote-box\">${movie.vote_count || '-'}</span> \n              </span>\n        \n            </p>\n\n            <p class=\"upcoming__movie-detail\">\n              <span>Popularity</span>\n              <span>${movie.popularity?.toFixed(1) || '-'}</span>\n            </p>\n\n            <p class=\"upcoming__movie-detail\">\n              <span>Genre</span>\n              <span>${genreNames || 'Unknown'}</span>\n            </p>\n          </div>\n          <h4 class=\"upcoming__about-title\">ABOUT</h4>\n          <p class=\"upcoming__movie-overview\">${movie.overview || 'No description available.'}</p>\n\n          <button id=\"library-btn\" class=\"upcoming__btn ${btnClass}\">${btnText}</button>\n        </div>\n      </div>\n    `;\n\n    const btn = document.getElementById('library-btn');\n    btn?.addEventListener('click', () => toggleLibrary(movie, btn));\n  }\n\n  async function initUpcoming() {\n    try {\n      const genresRes = await fetchGenres();\n      GENRES = genresRes.genres || [];\n\n      const data = await fetchMoviesBetween(startDate, endDate, { region: 'TR' });\n      const movies = data.results || [];\n\n      if (!movies.length) {\n        upcomingContainer.innerHTML = `<p>${movies.length} movies this month.</p>`;\n        return;\n      }\n\n      const randomMovie = movies[Math.floor(Math.random() * movies.length)];\n      renderMovie(randomMovie);\n    } catch (err) {\n      console.error('upcoming init error:', err);\n      upcomingContainer.innerHTML = `<p>Error while fetching movie data.</p>`;\n    }\n  }\n\n  initUpcoming();\n}"],"names":["upcomingContainer","getLibrary","isInLibrary","id","toggleLibrary","movie","btn","library","item","getGenreNames","ids","_a","GENRES","g","renderMovie","imageUrl","inLib","btnText","btnClass","genreNames","_b","now","year","month","lastDay","startDate","endDate","initUpcoming","fetchGenres","movies","fetchMoviesBetween","randomMovie","err"],"mappings":"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"}